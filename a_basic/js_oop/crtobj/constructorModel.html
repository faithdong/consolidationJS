<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>构造函数模式-创建对象</title>
  <style>
    ul{
      display:flex;
      flex-wrap:wrap;
    }
  </style>
</head>
<body>
  <h3>创建对象---构造函数模式</h3>
  <strong>构造函数模式用于定义实
      例属性</strong>
  <div>
    <ul>
      <li>与工厂模式对比：
        <figure>
          <strong>
            <p>1、没有显示的创建对象；（没有使用 new Object() ）；</p>
            <p>2、直接将对象的属性和方法赋值给了 this 对象；</p>
            <p>3、没有 return 语句 。</p>
          </strong>
        </figure>
      </li>
      <li>注意：
        <figure>
          <strong>
            <p>1、定义的构造函数，函数名首字母大写；（ 约定俗成的规范 ）</p>
            <p>2、创建新实例，必须使用 new 操作符</p>
            <fieldset>3、
              <p>在 chrome 控制台 打印 p1 或者 p2</p>
              <p>在原型链上有 Constructr 和 __proto__ ； 而工厂模式 只有 __proto__</p>
            </fieldset>
          </strong>
        </figure>
      </li>
      <li>使用 构造函数 发生了什么：
        <figure>
          <strong>
            <p>1、创建一个新对象；</p>
            <p>2、将构造函数作用域对象赋给新对象；（因此 this 就指向了 新对象）</p>
            <p>3、执行构造函数中的代码 （ 为这个新对象添加属性 ）</p>
            <p>4、返回新对象</p>
          </strong>
        </figure>
      </li>
      <li> 将构造函数当作普通函数：
          <figure>
            <strong>
              <p>1、当作普通函数调用:</p>
              <fieldset>
                  <p>Person("Greg", 27, "Doctor"); // 作用域 添加到 window</p>
                  <p>window.sayName(); //"Greg"</p>
              </fieldset>
              <p>2、在另一个对象的作用域中调用:</p>
              <fieldset>
                  <p>var o = new Object();</p>
                  <p>Person.call(o, "Kristen", 25, "Nurse");</p>
                  <p>o.sayName(); //"Kristen"</p>
              </fieldset>
            </strong>
          </figure>
        </li>
        <li>缺点：
          <figure>
            <strong>
              <p>1、使用构造函数的主要问题，就是每个方法都要在每个实例上重新创建一遍</p>
              <p> person1 和 person2 都有一个名为 sayName() 的方法，但那
                  两个方法不是同一个 Function 的实例</p>
                  <p>p1.sayName == p2.sayName  //false</p>
            </strong>
          </figure>
        </li>
    </ul>
  </div>
  <script>
    function Person(name,age,job){
      this.name = name;
      this.age = age;
      this.job = job;
      //this.sayName = new Function("alert(this.name)"); //  与声明函数在逻辑上是等价的
      this.sayName = function(){
        console.log(this.name);
      }
    }
    var p1 = new Person("dawang",29,"soft Engineer");
    var p2 = new Person("laoliu",36,"Doctor");
    p1.sayName();
    p2.sayName();
    console.log(p1.sayName == p2.sayName); //false
  </script>
</body>
</html>